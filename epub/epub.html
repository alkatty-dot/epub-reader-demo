<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2025童書星創獎【EPUB閱讀器】</title>
  
  <!-- 保持乾淨：樣式統一放 epub.css -->
  <link rel="stylesheet" href="epub.css">

  <!-- 必要程式 -->
  <script src="../data.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js"></script>
  <script src="epub.min.js"></script>
  <script src="index.js"></script>
  <script src="get_data.js"></script>
</head>
<body>
  
  <!-- 書名 / 出版資訊 -->
  <div id="title" role="banner" aria-live="polite"></div>

  <!-- 閱讀器畫面 -->
  <div id="viewer" role="region" aria-label="EPUB 閱讀器" aria-busy="true"></div>

  <!-- 載入動畫 -->
  <div id="loading" aria-hidden="true" hidden>
    <div class="spinner" aria-label="載入中…"></div>
  </div>

    <!-- 訊息吐司 -->
  <div id="toast" role="status" aria-live="polite" hidden></div>

  <!-- 🔹控制區塊 -->
  <div class="controls" role="toolbar" aria-label="閱讀控制">
    <div class="navigation-buttons">
      <button id="prev" class="btn btn-primary" aria-label="上一頁">上一頁</button>
      <button id="next" class="btn btn-primary" aria-label="下一頁">下一頁</button>
      <button id="increaseFont" class="btn btn-accent" aria-label="放大字體">放大</button>
      <button id="decreaseFont" class="btn btn-ghost" aria-label="縮小字體">縮小</button>
    </div>
    <div class="extra-controls">
      <button id="tocButton" class="btn btn-ghost" aria-haspopup="true" aria-controls="toc">目錄</button>
      <button id="settingsButton" class="btn btn-ghost" aria-haspopup="true" aria-controls="toolDiv">設定</button>
    </div>
  </div>

  <script>
    // 等到 index.js 廣播 EPUBReaderReady 後，再去跑 do_logic()
    document.addEventListener('EPUBReaderReady', function () {
      if (typeof do_logic === 'function') {
        do_logic();
      }
    }, { once: true });
  </script>
    
  <script>
    function do_logic(){  
      document.getElementById("title").innerHTML += 
        "<h3>" + selected_book.title + "</h3>" + 
        " 出版社:" + selected_book.publisher + 
        " ISBN:" + selected_book.isbn ;
      EPUBReader.init('viewer', '../' + selected_book.file);
    }
  </script>
  
  <script type="text/javascript" src="../get_data.js"></script>
</body>
</html>
