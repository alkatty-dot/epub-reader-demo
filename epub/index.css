@charset "UTF-8";
 body { 
        	
            margin: 0; 
            font-family: Arial, sans-serif; 
        } 

        .controls { 
            margin: 20px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
        } 

        .navigation-buttons button, 
        .controls select { 
            padding: 10px; 
            font-size: 16px; 
        } 

        .navigation-buttons button:disabled, 
        .controls select:disabled { 
            background-color: #ccc; 
            cursor: not-allowed; 
        } 

        #viewer {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            width: min(100vw - 32px, 100%);
            height: clamp(60vh, 100dvh - 120px, 100dvh);
            border: 1px solid #ccc;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            pointer-events: none;
        }

        /* 小螢幕時讓外框留白更小、工具可點擊更好按 */
        @media (max-width: 600px) {
        #viewer {
            width: 100vw;
            height: 100dvh;
            border-width: 0; /* 滿版體驗 */
        }
        }


		 #viewer_event {
            border: 1px solid #ccc;
            overflow: hidden;  /* 禁用滾動條 */
            flex-direction: column;
            z-index: 998;
            overflow-y: auto;
            position: fixed;
        }

        .margins {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .margins label {
            margin-right: 5px;
        }

        .margins input {
            width: 40px;
        }
		
		 /* 工具樣式 */
        #toolButton {
            position: fixed;
            color: black;
            padding: 0px;
            margin: 0px;
			font-size:40px;
            z-index: 999; 
            max-height: 70%;
            overflow-y: auto;
            width: 40px;
             user-select: none; /* 禁止文字選取 */
            -webkit-user-select: none; /* 適用於 Safari/Chrome */
            -moz-user-select: none; /* 適用於 Firefox */
            -ms-user-select: none; /* 適用於 IE/Edge */
        }

        #toolButton a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 44px;   /* 建議最小可點區 */
            height: 44px;
            text-decoration: none;
            outline: none;
            }
        #toolButton a:focus-visible {
            outline: 2px solid currentColor;
            outline-offset: 2px;
            }
		
		
        /* 目錄樣式 */
        #toc {
            position: fixed;
            top: 5px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
/*             display: none;  */
            z-index: 1000;
            max-height: 70%;
            overflow-y: auto;
            width: 250px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.3);
             user-select: none; /* 禁止文字選取 */
    -webkit-user-select: none; /* 適用於 Safari/Chrome */
    -moz-user-select: none; /* 適用於 Firefox */
    -ms-user-select: none; /* 適用於 IE/Edge */
        }

        #toc ul {
            list-style-type: none;
            padding: 0;
        }

        #toc li {
            margin-bottom: 10px;
        }

        #toc button {
            background: none;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        #toc button:hover {
            text-decoration: underline;
        }

        #closeToc {
		    position: absolute;
		    top: 10px;
		    right: 10px;
		    color: white;
		    background: none;  
		    border: none;
		    font-size: 24px !important; /* 修改按鈕字體大小 */
		    cursor: pointer  !important;
		    width: 40px  !important; /* 設定按鈕寬度 */
		    height: 40px  !important; /* 設定按鈕高度 */
		    line-height: 40px  !important; /* 將文字置中 */
		    text-align: center;
		    border-radius: 50%; /* 圓形按鈕樣式 */
		    background-color: rgba(255, 0, 0, 0.8)  !important; /* 紅色背景增加可見性 */
		}
		
		
		 /* 目錄樣式 */
        #toolDiv {
            position: fixed;
            top: 5px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none; /* 隱藏 */
            z-index: 1000;
            max-height: 70%;
            overflow-y: auto;
            width: 250px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.3);
            user-select: none; /* 禁止文字選取 */
		    -webkit-user-select: none; /* 適用於 Safari/Chrome */
		    -moz-user-select: none; /* 適用於 Firefox */
		    -ms-user-select: none; /* 適用於 IE/Edge */
		     font-size: 30px
        }
        
        #toolDiv input[type="radio"] {
		    width: 30px;
		    height: 30px;
		    margin-right: 10px; /* 與文字間隔 */
		}
        
        #toolDiv div {
		    margin-bottom: 10px; /* 為每組調整選項間添加間距 */
		   
		}
		#toolDiv select {
		    font-size: 1.2em; /* 下拉選單文字大小 */
		    padding: 8px; /* 增加內邊距讓選單更易點擊 */
		}
		
		#toolDiv select option{
		    font-size: 1.2em; /* 選單項目的文字大小 */
		}
		#toolDiv label {
		    margin-right: 5px; /* 確保標籤與選單間距合理 */
		}
		
         #closeTool {
		    position: absolute;
		    top: 10px;
		    right: 10px;
		    color: white;
		    background: none;  
		    border: none;
		    font-size: 24px !important; /* 修改按鈕字體大小 */
		    cursor: pointer  !important;
		    width: 40px  !important; /* 設定按鈕寬度 */
		    height: 40px  !important; /* 設定按鈕高度 */
		    line-height: 40px  !important; /* 將文字置中 */
		    text-align: center;
		    border-radius: 50%; /* 圓形按鈕樣式 */
		    background-color: rgba(255, 0, 0, 0.8)  !important; /* 紅色背景增加可見性 */
		}
		
		.adjust-btn {
		    font-size: 18px; /* 調整字體大小 */
		    padding: 10px 15px; /* 增加內邊距讓按鈕變大 */
		    margin: 0 5px; /* 增加按鈕間距 */
		    border: 1px solid #ccc;
		    border-radius: 5px;
		    background-color: #f5f5f5; /* 背景色 */
		    cursor: pointer;
		    transition: background-color 0.3s ease;
		}
		
		.adjust-btn:hover {
		    background-color: #e0e0e0; /* 滑鼠懸停時的背景色 */
		}
/* ====== Global polish: typography, radius, shadows, motion ====== */
:root {
  --font-sans: ui-sans-serif, -apple-system, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, sans-serif;
  --radius: 16px;
  --radius-sm: 10px;

  /* Light theme tokens (覆蓋會在 [data-theme] 下方處理) */
  --bg: #f6f7fb;
  --panel: #ffffffcc; /* 半透明玻璃感 */
  --border: #e6e7eb;
  --text: #1c1e26;
  --muted: #6b7280;
  --accent: #3b82f6;
  --accent-weak: #93c5fd;

  --shadow-sm: 0 2px 8px rgba(16, 24, 40, 0.08);
  --shadow: 0 10px 30px rgba(16, 24, 40, 0.14);

  --hit: 44px; /* 便於觸控的點擊大小 */
}

/* Dark theme 覆蓋（當前主題切換時可在 body 上加 data-theme="dark"；下方JS會自動處理radio） */
[data-theme="dark"] {
  --bg: #0b0f14;
  --panel: #0f172acc;
  --border: #1f2937;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --accent: #60a5fa;
  --accent-weak: #1d4ed8;
  --shadow-sm: 0 2px 8px rgba(0,0,0,.4);
  --shadow: 0 12px 36px rgba(0,0,0,.6);
}

/* MI theme（若你有「mi」主題，也給它一套更有品牌感的色票） */
[data-theme="mi"] {
  --bg: #fff8ef;
  --panel: #ffffffd6;
  --border: #ffe0bf;
  --text: #2a1f17;
  --muted: #8b6b50;
  --accent: #ff8a00;
  --accent-weak: #ffd7a3;
}

/* 基礎排版與背景 */
html, body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* ====== Viewer polish（保留你原本的自適應設定） ====== */
#viewer {
  border: 1px solid var(--border);
  background: #fff;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
  position: relative;
}

/* 邊緣的淡淡導讀光暈：暗示左右可翻頁（純視覺，不影響事件區） */
#viewer::before,
#viewer::after {
  content: "";
  position: absolute;
  top: 0; bottom: 0;
  width: min(8vw, 96px);
  pointer-events: none;
}
#viewer::before {
  left: 0;
  background: linear-gradient(90deg, rgba(0,0,0,.06), transparent);
}
#viewer::after {
  right: 0;
  background: linear-gradient(270deg, rgba(0,0,0,.06), transparent);
}
[data-theme="dark"] #viewer::before {
  background: linear-gradient(90deg, rgba(255,255,255,.06), transparent);
}
[data-theme="dark"] #viewer::after {
  background: linear-gradient(270deg, rgba(255,255,255,.06), transparent);
}

/* ====== 工具列 / 面板（玻璃感） ====== */
#toolDiv, #toc, .panel {
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

/* 工具列區塊容器（若你已有定位，我只做內距與排列美化） */
#toolDiv {
  padding: 14px 16px;
  min-width: 280px;
}

/* 工具列內各組件間距 */
#toolDiv .row + .row { margin-top: 12px; }

/* 目錄面板（TOC） */
#toc {
  max-width: min(86vw, 420px);
  max-height: min(80vh, 680px);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
#toc header {
  padding: 14px 16px;
  font-weight: 700;
  border-bottom: 1px solid var(--border);
}
#toc .toc-body {
  overflow: auto;
  padding: 8px 6px;
}
#toc .toc-body a {
  display: block;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  color: var(--text);
  text-decoration: none;
}
#toc .toc-body a:hover {
  background: color-mix(in oklab, var(--accent) 12%, transparent);
}
#toc .toc-body a:active {
  transform: translateY(1px);
}

/* ====== Buttons / Inputs ====== */
.button, #toolButton a, .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--hit);
  min-width: var(--hit);
  padding: 0 14px;
  gap: 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #fff;
  color: var(--text);
  box-shadow: var(--shadow-sm);
  text-decoration: none;
  transition: transform .08s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
}
[data-theme="dark"] .button,
[data-theme="dark"] #toolButton a,
[data-theme="dark"] .btn {
  background: #0b1220;
}
.button:hover, #toolButton a:hover, .btn:hover {
  box-shadow: var(--shadow);
  border-color: color-mix(in oklab, var(--accent) 60%, var(--border));
}
.button:active, #toolButton a:active, .btn:active {
  transform: translateY(1px);
}
.button--primary {
  background: var(--accent);
  color: white;
  border-color: transparent;
}
.button--primary:hover {
  background: color-mix(in oklab, var(--accent) 88%, var(--accent-weak));
}

/* Toggle / Radio 行為區域加大 */
label, .control {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  min-height: 36px;
  padding: 4px 8px;
  border-radius: 8px;
}
label:hover, .control:hover {
  background: color-mix(in oklab, var(--accent) 8%, transparent);
}

/* Range / Select */
input[type="range"] {
  accent-color: var(--accent);
}
select {
  border-radius: 10px;
  border: 1px solid var(--border);
  background: #fff;
  color: var(--text);
  padding: 8px 12px;
}
[data-theme="dark"] select { background: #0b1220; }

/* 可讀的捲軸 */
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb {
  background: color-mix(in oklab, var(--accent) 40%, #bbb);
  border-radius: 999px;
}

/* ====== 載入過場（淡入） ====== */
.is-loading #viewer {
  opacity: .5;
  filter: saturate(.8);
}
.viewer-fade-in {
  animation: viewerFade .26s ease-out;
}
@keyframes viewerFade {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* 偏好減少動作者，關閉動畫 */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* ===== Reader polish v2 ===== */

/* 頂部資訊列 */
#readerHeader {
  max-width: 1280px;
  margin: 12px auto 8px;
  padding: 0 16px;
}
#readerHeader .rh-title {
  font-size: 20px;
  font-weight: 700;
  line-height: 1.3;
}
#readerHeader .rh-meta {
  margin-top: 4px;
  font-size: 13px;
  color: #6b7280;
}
[data-theme="dark"] #readerHeader .rh-meta { color: #9ca3af; }

/* 置中排版：viewer 外層容器 */
#viewerWrapper {
  max-width: 1280px;
  margin: 0 auto 16px;
  padding: 0 16px;
}

/* 若目前沒有 wrapper，讓 #viewer 自己置中並有紙頁感 */
#viewer {
  margin: 0 auto;
  background: #fff;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 16px;
  box-shadow: 0 12px 36px rgba(16,24,40,.14);
  position: relative;
}

/* Viewer 內左右柔光，暗示可翻頁 */
#viewer::before, #viewer::after {
  content: "";
  position: absolute; top: 0; bottom: 0; width: min(9vw, 96px); pointer-events: none;
}
#viewer::before { left: 0;  background: linear-gradient(90deg, rgba(0,0,0,.05), transparent); }
#viewer::after  { right: 0; background: linear-gradient(270deg, rgba(0,0,0,.05), transparent); }
[data-theme="dark"] #viewer { background: #0b0f14; border-color: rgba(255,255,255,.06); }
[data-theme="dark"] #viewer::before { background: linear-gradient(90deg, rgba(255,255,255,.06), transparent); }
[data-theme="dark"] #viewer::after  { background: linear-gradient(270deg, rgba(255,255,255,.06), transparent); }

/* 右側直立工具列（沿用你原邏輯，只做外觀與定位） */
#toolButton {
  position: absolute;
  right: 12px;
  top: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 5;
}
#toolButton a,
#toolButton button {
  display: inline-flex; align-items: center; justify-content: center;
  width: 44px; height: 44px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,.08);
  background: #ffffffcc;
  backdrop-filter: blur(10px);
  box-shadow: 0 6px 16px rgba(16,24,40,.12);
  color: #111827; text-decoration: none;
  transition: box-shadow .2s ease, transform .06s ease, background .2s ease;
}
#toolButton a:hover, #toolButton button:hover { box-shadow: 0 10px 30px rgba(16,24,40,.18); }
#toolButton a:active, #toolButton button:active { transform: translateY(1px); }
[data-theme="dark"] #toolButton a,
[data-theme="dark"] #toolButton button {
  background: #0f172acc; color: #e5e7eb; border-color: rgba(255,255,255,.08);
}

/* 目錄面板（美化，不改你的開關行為） */
#toc {
  border-radius: 14px;
  border: 1px solid rgba(0,0,0,.08);
  background: #ffffffee;
  backdrop-filter: blur(10px);
  box-shadow: 0 16px 40px rgba(16,24,40,.18);
}
[data-theme="dark"] #toc {
  background: #0f172aee; border-color: rgba(255,255,255,.08);
}

/* 底部進度條與頁碼浮標 */
#progressBarWrap {
  position: absolute; left: 0; right: 0; bottom: 0;
  height: 6px;
  background: rgba(0,0,0,.06);
}
#progressBar {
  width: 0%;
  height: 100%;
  background: #3b82f6;
  transition: width .15s ease;
}
[data-theme="dark"] #progressBarWrap { background: rgba(255,255,255,.08); }
[data-theme="dark"] #progressBar { background: #60a5fa; }

#pageBadge {
  position: absolute;
  right: 12px; bottom: 12px;
  padding: 6px 10px;
  border-radius: 10px;
  background: #111827cc; color: #fff;
  font-size: 12px;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 18px rgba(0,0,0,.25);
}
[data-theme="dark"] #pageBadge { background: #0b1220cc; }

/* 小螢幕：滿版感受、邊框變淡 */
@media (max-width: 600px) {
  #readerHeader { margin: 8px auto 6px; padding: 0 12px; }
  #viewer { border-radius: 10px; box-shadow: 0 10px 24px rgba(16,24,40,.16); }
}
