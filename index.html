<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="data.js"></script>
    <title>2025ç«¥æ›¸æ˜Ÿå‰µçã€å‡ºç‰ˆçµ„ã€‘</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <h1>2025ç«¥æ›¸æ˜Ÿå‰µçã€å‡ºç‰ˆçµ„ã€‘ç·šä¸Šè©•å¯©</h1>
        <p>é¦–æ¬¡æ–°å¢å‡ºç‰ˆçµ„ï¼Œçå‹µå·²ç¶“å‡ºç‰ˆç™¼è¡Œä¸¦ç”³è«‹ISBNä¹‹é›»å­æ›¸ï¼Œé¸å‡º3åç‰¹å„ªï¼ˆçé‡‘$12,000+çç›ƒä¹™åº§ï¼‰å’Œ7åå„ªé¸ï¼ˆçé‡‘$8,000+çç›ƒä¹™åº§ï¼‰</p>
    </div>

    <div class="stats">
        <div class="stat-item">
            <span class="stat-number" id="totalBooks">1</span>
            <span class="stat-label">ç¸½è¨ˆåœ–æ›¸</span>
        </div>
        <div class="stat-item">
            <span class="stat-number" id="publisherCount">1</span>
            <span class="stat-label">å‡ºç‰ˆç¤¾</span>
        </div>
    </div>

    <div class="container">
        <div class="books-grid" id="booksGrid">
            <!-- Books will be dynamically generated here -->
        </div>
    </div>

    <script>
    
        function escapeHTML(str) {
            return String(str ?? '')
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;');
        }

        function getFileExtension(filename) {
            return filename.split('.').pop().toLowerCase();
        }

        function getFileIcon(filename) {
            const extension = getFileExtension(filename);
            switch (extension) {
            case 'epub': return 'ğŸ“–';
            case 'pdf':  return 'ğŸ“„';
            case 'zip':  return 'ğŸ—ƒï¸';
            default:     return 'ğŸ“';
            }
        }

        function createBookCard(book) {
            const fileIcon = getFileIcon(book.file);
            const fileType = getFileExtension(book.file).toUpperCase();
            
            return `
                <div class="book-card fade-in">
            	<div class="book-cover">
			            ${book.cover && book.cover !== book.title ? 
			                `<img src="${book.cover}" alt="${book.title}" onerror="this.parentElement.innerHTML='<div class=\\'book-cover-placeholder\\'>ğŸ“š</div>'">` :
			                `<div class="book-cover-placeholder">ğŸ“š</div>`
			            }
			        </div>
                    <div class="book-header">
                        <span class="book-number">#${book.number}</span>
                        <h3 class="book-title">${book.title}</h3>
                        <div class="book-publisher">
                            <span class="publisher-icon">ğŸ¢</span>
                            ${book.publisher}
                        </div>
                    </div>
                    <div class="book-body">
                        <div class="book-isbn">
                            <strong>ISBN:</strong> ${book.isbn}
                        </div>
                        <div class="book-files">
                            <div class="file-info">
                                <span class="file-icon">${fileIcon}</span>
                                <span>${book.file} ${fileType && fileType !== book.file.toUpperCase() ? '(' + fileType + ')' : ''}</span>
                            </div>
                        </div>
                    </div>
                    <div class="book-actions">
                        <button class="action-btn btn-primary" onclick="viewBook(${book.number})">
                            ğŸ“– é–±è®€
                        </button>
                    </div>
                </div>
            `;
        }

        function viewBook(bookNumber) {
            const book = booksData.find(b => b.number === bookNumber);
            
            const fileName = book.file.trim();
            const idx = fileName.lastIndexOf('.');
            if (idx === -1) {
             	alert('æª”åæ²’æœ‰å‰¯æª”åï¼š' + fileName );
              return;
            }

            const ext = fileName.substring(idx + 1).toLowerCase();
            
            if (ext === 'epub') {
                window.open('epub/epub.html?id=' + encodeURIComponent(book.number));
              } else if (ext === 'pdf') {
                window.open('pdf/pdf.html?id=' + encodeURIComponent(book.number));
              } else {
            	  alert('ä¸æ”¯æ´çš„æª”æ¡ˆé¡å‹ï¼š.' + ext + 'ï¼ˆæª”åï¼š' + fileName + 'ï¼‰');
              }
        }


        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const grid = document.getElementById('booksGrid');
            grid.innerHTML = booksData.map(book => createBookCard(book)).join('');
            
            // æ›´æ–°çµ±è¨ˆ
            document.getElementById('totalBooks').textContent = booksData.length;
            const publishers = [...new Set(booksData.map(book => book.publisher))];
            document.getElementById('publisherCount').textContent = publishers.length;
        });
    </script>
</body>
</html>